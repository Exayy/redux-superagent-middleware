!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("superagent")):"function"==typeof define&&define.amd?define(["superagent"],r):"object"==typeof exports?exports.library=r(require("superagent")):e.library=r(e.superagent)}(this,function(e){return function(e){function r(t){if(o[t])return o[t].exports;var n=o[t]={exports:{},id:t,loaded:!1};return e[t].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}var o={};return r.m=e,r.c=o,r.p="",r(0)}([function(e,r,o){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function n(e,r,o,t,n){if("function"!=typeof e)return void console.error("superagentMiddleware error : onStart, onSuccess, onError, onComplete must be functions");var a=e(t,n,r.dispatch,r.getState);a&&o(a)}function a(e){if(!e)return{error:!0,meta:{requestFailed:!0}};var r={error:!0,payload:e.body,meta:{httpCode:e.status}};return e.status<=300&&(r.error=!1),r}Object.defineProperty(r,"__esModule",{value:!0});var u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e};r.default=function(e){return f=u({},f,e),c};var s=o(1),i=t(s),f={base:"",defaultHeaders:{"Content-Type":"application/json"},hooks:{}},c=function(e){return function(r){return function(o){if(!o.request)return r(o);var t=!1,s=o.request instanceof Array?o.request:[o.request],c=s.map(function(r){var t={base:r.base||f.base,url:r.url,method:r.method||"GET",headers:u({},f.defaultHeaders,r.headers||{}),params:u({},f.defaultParams,r.params||{}),body:r.body};return f.hooks.onRequest&&(t=f.hooks.onRequest(e,o,t)||t),t});o.onStart&&n(o.onStart,e,r);var d=[];c.map(function(e){d.push(new Promise(function(r){var o=(0,i.default)(e.method,e.base+e.url);e.params&&o.query(e.params),e.body&&o.send(e.body),o.end(function(e,o){r(o)})}))}),o.cancel=function(){t=!0},Promise.all(d).then(function(u){if(!t){var i=!1,c=!1,d={},p={};u.map(function(r,t){var n=a(r);if((n.meta.requestFailed&&f.hooks.onFailure&&f.hooks.onFailure(e,o,s[t],r)===!1||n.error&&f.hooks.onError&&f.hooks.onError(e,o,s[t],r)===!1)&&(i=!0),n.error===!0&&(c=!0),o.request instanceof Array){var u=s[t].name||"request_"+t;d[u]=n.payload,p[u]=n.meta}else d=n.payload,p=n.meta}),i||(!c&&o.onSuccess&&n(o.onSuccess,e,r,d,p),c&&o.onError&&n(o.onError,e,r,d,p)),o.onComplete&&n(o.onComplete,e,r)}})}}}},function(r,o){r.exports=e}])});
//# sourceMappingURL=library.min.js.map